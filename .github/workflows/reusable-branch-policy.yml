---
name: Reusable - Branch & PR Policy
on:
  workflow_call:

jobs:
  pr-title:
    runs-on: ubuntu-latest
    steps:
      - uses: amannn/action-semantic-pull-request@v5
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Check branch name
        run: |
          BRANCH="${{ github.head_ref }}"
          regex='^(feature|bugfix|chore|hotfix)/([A-Z]+-[0-9]+-.+|[a-z0-9._-]+)$'
          if [[ ! "$BRANCH" =~ $regex ]]; then
            echo "Invalid branch name: $BRANCH"
            exit 1
          fi
